var users={};function users_generateNewUser(){return{username:"none",password:"none"}}function users_getUsername(){return window.localStorage.getItem("token")?JSON.parse(window.localStorage.getItem("token")).user:"INVALID"}function users_setToken(a){$.when(window.localStorage.setItem("token",JSON.stringify(a))).done()}function users_flushToken(){window.localStorage.setItem("token","")}
function users_getToken(){return window.localStorage.getItem("token")?JSON.parse(window.localStorage.getItem("token")):"INVALID"};var browser_httpRequests={};function browser_httpRequests_getProjectsForBrowser(a,b){return $.ajax({url:"/getAllUsersProjects",data:{published:b},cache:!1,type:"GET",success:function(b){a.data=b},contenttype:"application/json"})}function browser_httpRequests_addTokenToHeader(){var a=window.localStorage.getItem("token");a&&(a=JSON.parse(a).token,$.ajaxSetup({headers:{"x-access-token":a}}))}
function browser_httpRequests_handleAuth(a){console.log("server returned"+a);return"EXPIRED"===a||"NO_TOKEN"===a?("EXPIRED"===a?console.log("http_handleAuth(): Token is expired"):console.log("http_handleAuth(): No Token"),users_flushToken(),browser_httpRequests_redirectHome(),!1):!0}function browser_httpRequests_redirectHome(){window.location="http://localhost:3000/create.html"};var gameBrowser={},gameBrowser_allProjects;gameBrowser_loadUsers();
function gameBrowser_loadUsers(){var a={data:{}};+$.when(browser_httpRequests_getProjectsForBrowser(a,!0)).done(function(){gameBrowser_allProjects=a.data;console.log(gameBrowser_allProjects);if(gameBrowser_allProjects!={})for(var b=0;b<gameBrowser_allProjects.length;b++)gameBrowser_displayGame(gameBrowser_allProjects[b],b);else $("#main-content").innerHTML="<h1>There are no games to show</h1>";$(".loading-content").hide();$("#main-content").show()})}
function gameBrowser_displayGame(a,b){var c='<div class="col s12 m6 l3"> <div class="card medium z-depth-3 darken-2"> <div class="card-image" id="project-'+b+'-image"><span class="card-title"><p>'+a.title+'</p><p style="font-size: 18px;">Created By: '+a.author+'</p></span></div><div class="card-content white-text"> <p>'+a.description+'</p> </div> <div class="card-action"><a href="'+a.gameLink+'"><span class="accent-color">Play Game</span></a> </div> </div> </div>';"Admin"==a.author?$("#recommended-games-list").append(c):
$("#all-games-list").append(c);c=$("#project-"+b+"-image");c.css("background-image","url("+a.imageLink+")");c.css("background-size","cover")};
