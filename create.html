<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" name="description" content="Fantasymaker : ">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- <script src="js/lib/dialog-polyfill.js"></script>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/dialog-polyfill.css">
		-->
		<link rel="stylesheet" type="text/css" href="stylesheets/css/spectrum.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="stylesheets/css/jquery.contextMenu.min.css" media="screen" />
 		<link rel="stylesheet" type="text/css" href="stylesheets/css/jquery-ui.min.css">
		<link rel="stylesheet" type="text/css" href="stylesheets/css/contextMenu.css"/>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/page-overlay.css"/>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/cytoscape.js-panzoom.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="stylesheets/css/interact.css"/>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/font-awesome.css"/>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/materialize.min.css"/>
		<link rel="stylesheet" type="text/css" href="stylesheets/css/ui.css" media="screen" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />



		<title>Fantasymaker</title>
	</head>

	<body>
	<nav>
		<div class="nav-wrapper">
			<a href="#" class="brand-logo">&nbsp; &nbsp; FantasyMaker</a>
			<ul id="nav-mobile" class="right hide-on-med-and-down">
				<li><a href="#">Project</a></li>
				<li><a href="#">Profile</a></li>
				<li><a href="#">Settings</a></li>
			</ul>
		</div>
	</nav>
	<!-- Page Edits Overlay (Materialize) -->
	<div id="page-modal" class="modal">
			<div class="modal-content" style="padding-top: 40px" >
				<div id="pagecontainers" class = "drag-container" style="width: 800px; height: 700px;">
				</div>
				<div class = "toolbar" id="edit-page-toolbar">
					<i class = "fa fa-times fa-2x modal-close" style="float:right;" ></i>

					<h5 id="pagename">Design Page: </h5>
					<hr/>
					<button class = "btn tooltip" title = "A container to hold any text, dialogue, etc..." oncLick=addTextContainer()>Add TextBox</button><br>
					<button class = "btn tooltip" title = "Images " onclick=addImageContainer()>Add Image</button> <br/>
					<button class = "btn tooltip" title = "Movies (gif,gifv,mov,webm,mp4)" onclick=addImageContainer()>Add Video</button> <br/>
					<button class = "btn tooltip" title = "Will display the output of associated control nodes as they are processed" oncLick=addOutputContainer()>Add Control Output</button><br/>
					<hr/>
					<button id = "ColourPicker1" class = "btn">Primary Colour</button> <br/>
					<button id = "ColourPicker2" class = "btn">Secondary Colour</button> <br/>
					<hr/>
					<button class = "gridmode btn tooltip" title = "Enable/disable a grid for your containers to snap to" onclick=toggleGridMode()>Toggle Grid</button> <br/>
					<button class = "handlemode btn tooltip" title = "Lets you preview how your page will look without the above handles" onclick=toggleHandles()>Toggle Handles</button> <br/>

					<button class = "pagetemplate btn tooltip" title = "Copy and save all the containers and styles within the page node, letting you make copies" onclick=createPageTemplate()>Save Page Template</button> <br/>
					<hr/>
					<div style="margin-top: 10px;">
						<i id = "addevent" class = "fa fa-plus fa-2x dropdown-button"style="float: right;"></i>
						<i id = "removeevent" class = "fa fa-minus fa-2x"style="float: right; margin-right: 5px;" onclick=deleteEvent()></i>
						<h6>Events</h6>	
					</div>				
					<!-- Events pane -->
					<div id = "eventspane">
					</div>

				</div>
			</div>
	</div>

	<!-- Control Edit Overlay (Materialize) -->
	<div id="control-modal" class="modal modal-fixed-footer" >
		<div class="modal-content">
			<i class = "fa fa-times fa-2x modal-close" style="float:right;" ></i>
			<h4>Control Node</h4> <br/>
			<ul id="connectedEdgesList" style="padding-top: 10px;" ondragover=handleDragEnter(event) class="collapsible popout" data-collapsible="accordion"></ul>
		</div>
		<div class="modal-footer">
		</div>
	</div>

	<!-- Connection Edit Overlay (Materialize) -->
	<div id="connection-modal" class="modal modal-fixed-footer">
		<div class="modal-content">
			<i class = "fa fa-times fa-2x modal-close" style="float:right;" ></i>
			<h4>Conditions & Outcomes</h4> <br/>
			<ul class="collapsible popout" data-collapsible="expandable">
				<li>
					<div class="collapsible-header active">Conditions</div>
					<div class="collapsible-body"> <ul id = "conditionsList" class="list-unstyled" ></ul></div>
				</li>
				<li>
					<div class="collapsible-header active">Outcomes</div>
					<div class="collapsible-body"><ul id = "outcomesList" class="list-unstyled" ></ul></div>
				</li>
			</ul>
		</div>
		<div class = "toolbar" id="connectiontoolbar">
			<p id="connectionname"></p>

		</div>
		<div class="modal-footer">

			<button type="button" class="btn btn-default" onClick=edgeOverlay_addNewOutcome('outcomesList') style="width: 30%; margin-right: 1%;">Add Outcome</button>
			<button type="button" class="btn btn-default" onClick=edgeOverlay_addNewCondition('conditionsList') style="width: 30%; margin-right: 1%;">Add Condition</button>

		</div>
	</div>
	<div id="audio-modal" class=" modal">
		<div class="modal-content">
			<ul id="audiolist" style="padding-top: 10px;" class="collapsible popout" data-collapsible="accordion">
			
			</ul>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" onClick=audio.addAssetButton(); style="width: 30%; margin-right: 1%;">Add</button>
			<button type="button" class="btn btn-default" onClick=audio.removeAsset(); style="width: 30%; margin-right: 1%;">Remove</button>
		</div>
	</div>

	<!-- Attributes Modal -->
	<div id="attributes-modal" class=" modal">
		<div class="modal-content">
			<div class="row max-height">
				<!-- List Pane -->
				<div class="col m2 pos-relative box-border" style="height: 100%;">
					<h4>Attributes</h4> <br/>
					<ul id="attributes-list"></ul>
					<a id="new-top-level-button" class="btn-floating btn-medium waves-effect waves-light red fab" onclick="showAddTopLevelInput();"><i class="medium material-icons">library_add</i></a>
					<div class="col m12 s12 float-bottom" id="new-top-level-container">
						<div class="input-field col m12">
							<input id="add-top-level-name" type="text" class="validate">
							<label for="add-top-level-name">Folder Name</label>
						</div>
						<a class="waves-effect waves-teal btn-flat col m12 s12" onclick="temp_add_top_level()">Add Folder</a>
				</div>
				</div>

				<div class="col m10 max-height">
					<!-- Attribute/Folder Title -->
					<div class="row">
						<div class="col m12">
							<h4 id="attribute-detail-title">Attribute Name</h4>
						</div>
					</div>
					<div class="row max-height">
						<!-- Sub-Folder Pane -->
						<div class="pane col m6 max-height pos-relative box-border">
							<h5 class="bottom-border">Folders</h5>
							<a id="new-folder-button" class="btn-floating btn-medium waves-effect waves-light red fab" onclick=""><i class="medium material-icons">add</i></a>
						</div>
						<!-- Values Pane -->
						<div class="pane col m6 max-height pos-relative box-border">
							<h5 class="bottom-border">Values</h5>
							<a id="new-value-button" class="btn-floating btn-medium waves-effect waves-light red fab" onclick=""><i class="medium material-icons">add</i></a>
							<br/>
							<ul id="values-list" class="collapsible" data-collapsible="accordion">

							</ul>
						</div>
					</div>

<!--
					<div id="attribute-detail-card" class="card-panel blue-grey">
						<div id="attribute-detail">
							<div id="attribute-detail-header"  class="row">
								<div class="row">

								</div>
							</div>
							<div class="row float-bottom">
								<div class="col m2 s3 value-class-row-style"><h5>Values</h5></div>
								<div class="col m2 s2 value-class-row-style"><a class="btn-floating btn-small waves-effect waves-light red" id="new-value-button" onclick="showAddValueInput()"><i class="material-icons">add</i></a></div>
								<div class="col m7 s7" id="new-value-container">
									<div class="input-field col s6">
										<input id="add-value-name" type="text" class="validate add-value" data-path="">
										<label for="add-value-name">Value Name</label>
									</div>
									<div class="input-field col s4">
										<input id="add-value-data" type="number" class="validate add-value" data-path="">
										<label for="add-value-data">Value</label>
									</div>
								</div>
							</div>
							<div class="row chips-container">
								<div class="col m12" id="values-chips-container">
									<ul id="attribute-detail-value-list"></ul>
								</div>
							</div>
							<div class="row float-bottom">
								<div class="col m2 s3 value-class-row-style"><h5>Sub-Classes</h5></div>
								<div class="col m2 s2 value-class-row-style"><a class="btn-floating btn-small waves-effect waves-light red" id="new-class-button" onclick="showAddClassInput()"><i class="material-icons">add</i></a></div>
								<div class="col m7 s7" id="new-class-container">
									<div class="input-field col s6">
										<input id="add-class-name" type="text" class="validate" data-path="">
										<label for="add-class-name">Class Name</label>
									</div>
								</div>
							</div>
							<div class="row chips-container">
								<div class="col m12" id="classes-chips-container">
									<ul id="attribute-detail-class-list"></ul>
								</div>
							</div>
						</div>
						<!-- <span class="white-text" style="margin-top: 50%; margin-bottom: 50%;">Click On An Attribute!</span> -->
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Main Content -->
	<div class="container-fluid">
		<div class="row" style="margin-bottom:0px"> <!-- Default is 20px, was causing page to scrollbar -->
			<div class = "col s12 l12">
				<ul class="tabs" id="tabheadings">
					<li class="tab col s4"><a class="active" href="#cyTab" onclick=wipeGame()>Graph</a></li> 
					<!-- onclick function added to clear .playpage, otherwise the elements present can mess with .length operations e.g. $('.text-container').length -->
					<li class="tab col s4"><a href="#Character" onclick=wipeGame()>Character</a></li>
					<li class="tab col s4"><a href="#Play" onclick=prepareForGame()>Play</a></li>
				</ul>
				<div class="tab-content">
					<div id="cyTab" class="tab-pane fade in active">
						<div class="col s9 l9" id="cy"> <!-- Grid "workspace" container -->
							</div>
						<div class="col s3 l3" id="sidebar"> <!-- Sidebar -->
							<h5>FantasyMaker</h5>
							<hr/>
							<button class='pagemode dropdown-button btn' href='#' onclick=changeState(this) data-activates='pagetemplates'>Page Node</button> <br/>
							<ul id='pagetemplates' class='dropdown-content'>
								<li><a onclick="chooseNodeTemplate('Default');">Default</a></li>
							</ul>
							<button class="controlmode btn" onclick=changeState(this)>Control Node</button><br/>
							<button class="connectionmode btn" onclick=changeState(this)>Edge</button><br/>
							<hr/>
							<a class="waves-effect waves-light btn modal-trigger" href="#attributes-modal">Attributes</a>
							<br/>
							<a class="waves-effect waves-light btn" onclick=openAudioOverlay()>Audio</a>
							<br/>
							<hr/>
							<button class="connectivity btn" onclick=checkValidGraph()>Test Graph</button> <br/>
							<button class='dropdown-button btn' href='#' data-activates='stylegraph'>Style Graph</button> <br/>
							<ul id='stylegraph' class='dropdown-content'>
								<li><a onclick="layout_driver('Tree');">Tree</a></li>
								<li><a onclick="layout_driver('Grid');">Grid</a></li>
								<li><a onclick="layout_driver('Circle');">Circle</a></li>
								<li><a onclick="layout_driver('Spread');">Spread</a></li>
							</ul>
							<hr/>
							<button class="savebutton btn" onclick=http_save()>Save</button><br/>
							<button class="loadbutton btn" onclick=http_load()>Load</button><br/>
							<hr/>
							<button class="deletebutton btn selectionbutton" style = "display:none;" onclick=changeState(this)>Delete</button><br/>

							<button class="btn modal-trigger editbutton" style = "display:none;" data-target="page-modal">Edit Page</button>
							<button class="btn modal-trigger editbutton" style = "display:none;" data-target="connection-modal">Edit Edge</button>
							<button class="btn modal-trigger editbutton" style = "display:none;" data-target="control-modal">Edit Control</button>
							<br/>
							<br/>
						</div>
					</div>
					<div id="Play" class="tab-pane fade">
						<div class="col s9" id="playwindow">
							<div class = "playpage">
							</div>
							<button class="progressbutton button" style='float:right;' onclick=progressStory(0)>Continue</button>
							<div id = "audioplayer"></div>
							<div id = "videoplayer"></div>

						</div>
					</div>
					<div id="Character" class="tab-pane fade">
						<div class="container">
							<div class="row">
						</div>
						</div>
				</div>

			</div>
		</div>
	</div>
	</div>

	</body>
	<script src="js/lib/jquery-2.2.2.min.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
	<script defer src="js/lib/cytoscape.min.js"></script>
	<script defer src="js/lib/cytoscape-panzoom.js"></script>
	<script defer src="js/lib/materialize.min.js"></script>
	<script defer src="js/lib/interact.min.js"></script>
	<script defer src="js/lib/jquery.contextMenu.min.js"></script>
	<script defer src="js/lib/jquery.ui.position.min.js"></script>
	<script defer src="js/lib/spectrum.js"></script>
	<script src="http://www.youtube.com/player_api"></script>
	<script defer src="js/dev.min.js"></script>
</html>
